{"ast":null,"code":"import React,{useEffect,useState}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import{Toaster}from'react-hot-toast';import Sidebar from'./components/Sidebar';import Lockers from'./pages/Lockers';import Groups from'./pages/Groups';import Users from'./pages/Users';import Heartbeat from'./pages/Heartbeat';import Settings from'./pages/Settings';import{SocketProvider,useSocket}from'./contexts/SocketContext';import{AlertTriangle}from'lucide-react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AppContent(){const{offlineAlerts}=useSocket();const[mqttStatus,setMqttStatus]=useState('connected');useEffect(()=>{let isMounted=true;const fetchStatus=async()=>{try{const res=await axios.get('/api/status');if(isMounted)setMqttStatus(res.data.mqtt);}catch(e){if(isMounted)setMqttStatus('disconnected');}};fetchStatus();const interval=setInterval(fetchStatus,10000);// poll every 10s\nreturn()=>{isMounted=false;clearInterval(interval);};},[]);return/*#__PURE__*/_jsxs(Router,{future:{v7_startTransition:true,v7_relativeSplatPath:true},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen bg-dashboard-900\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col overflow-hidden\",children:[mqttStatus==='disconnected'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-600 text-white text-center py-2 font-semibold z-50\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-2\",children:\"\\u26A0\\uFE0F\"}),\" MQTT connection lost. Locker status updates are temporarily unavailable.\"]}),/*#__PURE__*/_jsx(\"main\",{className:\"flex-1 overflow-x-hidden overflow-y-auto bg-dashboard-900\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/lockers\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/lockers\",element:/*#__PURE__*/_jsx(Lockers,{})}),/*#__PURE__*/_jsx(Route,{path:\"/groups\",element:/*#__PURE__*/_jsx(Groups,{})}),/*#__PURE__*/_jsx(Route,{path:\"/users\",element:/*#__PURE__*/_jsx(Users,{})}),/*#__PURE__*/_jsx(Route,{path:\"/heartbeat\",element:/*#__PURE__*/_jsx(Heartbeat,{})}),/*#__PURE__*/_jsx(Route,{path:\"/settings\",element:/*#__PURE__*/_jsx(Settings,{})})]})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fixed top-4 right-4 z-50 space-y-2\",children:offlineAlerts.map(alert=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-dashboard-800 border border-danger-600 rounded-xl p-4 shadow-card max-w-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-5 h-5 text-danger-400 mt-0.5\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-white\",children:\"Locker Offline Alert\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-300 mt-1\",children:alert.message}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400 mt-2\",children:alert.timestamp.toLocaleTimeString()})]})]})},alert.id))}),/*#__PURE__*/_jsx(Toaster,{position:\"top-right\"})]});}function App(){return/*#__PURE__*/_jsx(SocketProvider,{children:/*#__PURE__*/_jsx(AppContent,{})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","BrowserRouter","Router","Routes","Route","Navigate","Toaster","Sidebar","Lockers","Groups","Users","Heartbeat","Settings","SocketProvider","useSocket","AlertTriangle","axios","jsx","_jsx","jsxs","_jsxs","AppContent","offlineAlerts","mqttStatus","setMqttStatus","isMounted","fetchStatus","res","get","data","mqtt","e","interval","setInterval","clearInterval","future","v7_startTransition","v7_relativeSplatPath","children","className","path","element","to","replace","map","alert","message","timestamp","toLocaleTimeString","id","position","App"],"sources":["/Users/michaelhanna/Documents/DEV/INZAN/client/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport { Toaster } from 'react-hot-toast';\nimport Sidebar from './components/Sidebar';\nimport Lockers from './pages/Lockers';\nimport Groups from './pages/Groups';\nimport Users from './pages/Users';\nimport Heartbeat from './pages/Heartbeat';\nimport Settings from './pages/Settings';\nimport { SocketProvider, useSocket } from './contexts/SocketContext';\nimport { AlertTriangle } from 'lucide-react';\nimport axios from 'axios';\n\nfunction AppContent() {\n  const { offlineAlerts } = useSocket();\n  const [mqttStatus, setMqttStatus] = useState('connected');\n\n  useEffect(() => {\n    let isMounted = true;\n    const fetchStatus = async () => {\n      try {\n        const res = await axios.get('/api/status');\n        if (isMounted) setMqttStatus(res.data.mqtt);\n      } catch (e) {\n        if (isMounted) setMqttStatus('disconnected');\n      }\n    };\n    fetchStatus();\n    const interval = setInterval(fetchStatus, 10000); // poll every 10s\n    return () => {\n      isMounted = false;\n      clearInterval(interval);\n    };\n  }, []);\n\n  return (\n    <Router future={{ v7_startTransition: true, v7_relativeSplatPath: true }}>\n      <div className=\"flex h-screen bg-dashboard-900\">\n        <Sidebar />\n        <div className=\"flex-1 flex flex-col overflow-hidden\">\n          {/* MQTT Status Banner */}\n          {mqttStatus === 'disconnected' && (\n            <div className=\"bg-red-600 text-white text-center py-2 font-semibold z-50\">\n              <span className=\"mr-2\">⚠️</span> MQTT connection lost. Locker status updates are temporarily unavailable.\n            </div>\n          )}\n          <main className=\"flex-1 overflow-x-hidden overflow-y-auto bg-dashboard-900\">\n            <Routes>\n              <Route path=\"/\" element={<Navigate to=\"/lockers\" replace />} />\n              <Route path=\"/lockers\" element={<Lockers />} />\n              <Route path=\"/groups\" element={<Groups />} />\n              <Route path=\"/users\" element={<Users />} />\n              <Route path=\"/heartbeat\" element={<Heartbeat />} />\n              <Route path=\"/settings\" element={<Settings />} />\n            </Routes>\n          </main>\n        </div>\n      </div>\n      \n      {/* Offline Alerts */}\n      <div className=\"fixed top-4 right-4 z-50 space-y-2\">\n        {offlineAlerts.map((alert) => (\n          <div\n            key={alert.id}\n            className=\"bg-dashboard-800 border border-danger-600 rounded-xl p-4 shadow-card max-w-sm\"\n          >\n            <div className=\"flex items-start space-x-3\">\n              <AlertTriangle className=\"w-5 h-5 text-danger-400 mt-0.5\" />\n              <div className=\"flex-1\">\n                <p className=\"text-sm font-medium text-white\">Locker Offline Alert</p>\n                <p className=\"text-sm text-gray-300 mt-1\">{alert.message}</p>\n                <p className=\"text-xs text-gray-400 mt-2\">\n                  {alert.timestamp.toLocaleTimeString()}\n                </p>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n      \n      <Toaster position=\"top-right\" />\n    </Router>\n  );\n}\n\nfunction App() {\n  return (\n    <SocketProvider>\n      <AppContent />\n    </SocketProvider>\n  );\n}\n\nexport default App; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,aAAa,GAAI,CAAAC,MAAM,CAAEC,MAAM,CAAEC,KAAK,CAAEC,QAAQ,KAAQ,kBAAkB,CACnF,OAASC,OAAO,KAAQ,iBAAiB,CACzC,MAAO,CAAAC,OAAO,KAAM,sBAAsB,CAC1C,MAAO,CAAAC,OAAO,KAAM,iBAAiB,CACrC,MAAO,CAAAC,MAAM,KAAM,gBAAgB,CACnC,MAAO,CAAAC,KAAK,KAAM,eAAe,CACjC,MAAO,CAAAC,SAAS,KAAM,mBAAmB,CACzC,MAAO,CAAAC,QAAQ,KAAM,kBAAkB,CACvC,OAASC,cAAc,CAAEC,SAAS,KAAQ,0BAA0B,CACpE,OAASC,aAAa,KAAQ,cAAc,CAC5C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,QAAS,CAAAC,UAAUA,CAAA,CAAG,CACpB,KAAM,CAAEC,aAAc,CAAC,CAAGR,SAAS,CAAC,CAAC,CACrC,KAAM,CAACS,UAAU,CAAEC,aAAa,CAAC,CAAGxB,QAAQ,CAAC,WAAW,CAAC,CAEzDD,SAAS,CAAC,IAAM,CACd,GAAI,CAAA0B,SAAS,CAAG,IAAI,CACpB,KAAM,CAAAC,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAX,KAAK,CAACY,GAAG,CAAC,aAAa,CAAC,CAC1C,GAAIH,SAAS,CAAED,aAAa,CAACG,GAAG,CAACE,IAAI,CAACC,IAAI,CAAC,CAC7C,CAAE,MAAOC,CAAC,CAAE,CACV,GAAIN,SAAS,CAAED,aAAa,CAAC,cAAc,CAAC,CAC9C,CACF,CAAC,CACDE,WAAW,CAAC,CAAC,CACb,KAAM,CAAAM,QAAQ,CAAGC,WAAW,CAACP,WAAW,CAAE,KAAK,CAAC,CAAE;AAClD,MAAO,IAAM,CACXD,SAAS,CAAG,KAAK,CACjBS,aAAa,CAACF,QAAQ,CAAC,CACzB,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEZ,KAAA,CAAClB,MAAM,EAACiC,MAAM,CAAE,CAAEC,kBAAkB,CAAE,IAAI,CAAEC,oBAAoB,CAAE,IAAK,CAAE,CAAAC,QAAA,eACvElB,KAAA,QAAKmB,SAAS,CAAC,gCAAgC,CAAAD,QAAA,eAC7CpB,IAAA,CAACX,OAAO,GAAE,CAAC,cACXa,KAAA,QAAKmB,SAAS,CAAC,sCAAsC,CAAAD,QAAA,EAElDf,UAAU,GAAK,cAAc,eAC5BH,KAAA,QAAKmB,SAAS,CAAC,2DAA2D,CAAAD,QAAA,eACxEpB,IAAA,SAAMqB,SAAS,CAAC,MAAM,CAAAD,QAAA,CAAC,cAAE,CAAM,CAAC,4EAClC,EAAK,CACN,cACDpB,IAAA,SAAMqB,SAAS,CAAC,2DAA2D,CAAAD,QAAA,cACzElB,KAAA,CAACjB,MAAM,EAAAmC,QAAA,eACLpB,IAAA,CAACd,KAAK,EAACoC,IAAI,CAAC,GAAG,CAACC,OAAO,cAAEvB,IAAA,CAACb,QAAQ,EAACqC,EAAE,CAAC,UAAU,CAACC,OAAO,MAAE,CAAE,CAAE,CAAC,cAC/DzB,IAAA,CAACd,KAAK,EAACoC,IAAI,CAAC,UAAU,CAACC,OAAO,cAAEvB,IAAA,CAACV,OAAO,GAAE,CAAE,CAAE,CAAC,cAC/CU,IAAA,CAACd,KAAK,EAACoC,IAAI,CAAC,SAAS,CAACC,OAAO,cAAEvB,IAAA,CAACT,MAAM,GAAE,CAAE,CAAE,CAAC,cAC7CS,IAAA,CAACd,KAAK,EAACoC,IAAI,CAAC,QAAQ,CAACC,OAAO,cAAEvB,IAAA,CAACR,KAAK,GAAE,CAAE,CAAE,CAAC,cAC3CQ,IAAA,CAACd,KAAK,EAACoC,IAAI,CAAC,YAAY,CAACC,OAAO,cAAEvB,IAAA,CAACP,SAAS,GAAE,CAAE,CAAE,CAAC,cACnDO,IAAA,CAACd,KAAK,EAACoC,IAAI,CAAC,WAAW,CAACC,OAAO,cAAEvB,IAAA,CAACN,QAAQ,GAAE,CAAE,CAAE,CAAC,EAC3C,CAAC,CACL,CAAC,EACJ,CAAC,EACH,CAAC,cAGNM,IAAA,QAAKqB,SAAS,CAAC,oCAAoC,CAAAD,QAAA,CAChDhB,aAAa,CAACsB,GAAG,CAAEC,KAAK,eACvB3B,IAAA,QAEEqB,SAAS,CAAC,+EAA+E,CAAAD,QAAA,cAEzFlB,KAAA,QAAKmB,SAAS,CAAC,4BAA4B,CAAAD,QAAA,eACzCpB,IAAA,CAACH,aAAa,EAACwB,SAAS,CAAC,gCAAgC,CAAE,CAAC,cAC5DnB,KAAA,QAAKmB,SAAS,CAAC,QAAQ,CAAAD,QAAA,eACrBpB,IAAA,MAAGqB,SAAS,CAAC,gCAAgC,CAAAD,QAAA,CAAC,sBAAoB,CAAG,CAAC,cACtEpB,IAAA,MAAGqB,SAAS,CAAC,4BAA4B,CAAAD,QAAA,CAAEO,KAAK,CAACC,OAAO,CAAI,CAAC,cAC7D5B,IAAA,MAAGqB,SAAS,CAAC,4BAA4B,CAAAD,QAAA,CACtCO,KAAK,CAACE,SAAS,CAACC,kBAAkB,CAAC,CAAC,CACpC,CAAC,EACD,CAAC,EACH,CAAC,EAZDH,KAAK,CAACI,EAaR,CACN,CAAC,CACC,CAAC,cAEN/B,IAAA,CAACZ,OAAO,EAAC4C,QAAQ,CAAC,WAAW,CAAE,CAAC,EAC1B,CAAC,CAEb,CAEA,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,mBACEjC,IAAA,CAACL,cAAc,EAAAyB,QAAA,cACbpB,IAAA,CAACG,UAAU,GAAE,CAAC,CACA,CAAC,CAErB,CAEA,cAAe,CAAA8B,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}